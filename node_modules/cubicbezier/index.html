<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8" />
<title>cubicbezier</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />
<link rel="stylesheet" href="http://g.tbcdn.cn/mtb/lib-bootstrap/3.0.3/css/bootstrap.min.css" />
<script src="http://g.tbcdn.cn/mtb/lib-3rd/??jquery/jquery.min.js,highlight/highlight.min.js"></script>
<script src="http://g.tbcdn.cn/mtb/lib-bootstrap/3.0.3/js/bootstrap.min.js"></script>
<script src="build/cubicbezier.debug.js"></script>
<style>
    .container {
        margin-bottom: 10px;
    }
</style>
</head>
<body>
<section class="jumbotron">
    <div class="container">
        <h1 class="center">lib.cubicbezier</h1>
    </div>
</section>
<div class="container">
    <div class="row">
        <div class="col-sm-12">
              <div class="form-group">
                <label for="cp">控制点</label>
                <input type="text" class="form-control" id="cp" value=".25,.1,.25,1" placeholder="输入控制点">
              </div>
              <button class="btn btn-primary" data-value="">绘制</button>
              <button class="btn btn-info" data-value="linear">绘制Linear</button>
              <button class="btn btn-info" data-value="ease">绘制Ease</button>
              <button class="btn btn-info" data-value="easeIn">绘制EaseIn</button>
              <button class="btn btn-info" data-value="easeOut">绘制EaseOut</button>
              <button class="btn btn-info" data-value="easeInOut">绘制EaseInOut</button>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col-sm-12">
            <p>红线为Canvas的bezierCurveTo函数绘制的线，绿点为借助lib.cubicbezier函数画的点</p>
            <canvas width="300" height="300" style="margin:20px auto; border:1px solid #666; background-color:#EEE;"></canvas>
        </div>
    </div>
</div>
<script type="text/javascript">

    document.addEventListener('click', function(e){
        var el = e.target;
        if (el.className.indexOf('btn') > -1) {
            var v = el.getAttribute('data-value');
            var cpEl = document.querySelector('#cp');
            switch(v) {
                case 'linear':
                    cpEl.value = '0,0,1,1';
                    break;
                case 'ease':
                    cpEl.value = '.25,.1,.25,1';
                    break;
                case 'easeIn':
                    cpEl.value = '.42,0,1,1';
                    break;
                case 'easeOut':
                    cpEl.value = '0,0,.58,1';
                    break;
                case 'easeInOut':
                    cpEl.value = '.42,0,.58,1';
                    break;
                default:
                    break;
            }
            make();
        }
    }, false);

    function make() {
        var canvas = document.querySelector('canvas');
        var cp = document.querySelector('#cp').value;
        var ctx = canvas.getContext('2d');

        cp && (cp = cp.split(','));

        if (cp && cp.length === 4) {
            cp = cp.map(function(i) {
                return parseFloat(i);
            });

            ctx.clearRect(0,0,300,300);

            ctx.beginPath();
            ctx.moveTo(0,0);
            ctx.bezierCurveTo(300 * cp[0], 300 * cp[1], 300 * cp[2], 300 * cp[3], 300, 300);
            ctx.lineWidth = 2.5;
            ctx.strokeStyle = 'red';
            ctx.stroke();
            ctx.closePath();

            var bezier = lib.cubicbezier(cp[0], cp[1], cp[2], cp[3]);
            for (var i = 0; i <= 300; i+= 10) {
                ctx.beginPath();
                var x = i;
                var y = bezier(i / 300) * 300;
                ctx.moveTo(x, y);
                ctx.arc(x, y, 3, 0, 2 * Math.PI);
                ctx.fillStyle = 'green';
                ctx.fill();
                ctx.closePath();
            }
        }
    }
</script>
</body>

</html>

